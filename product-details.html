<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Details | Nichi-In Software Solutions</title>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet" />

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="draft.css" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* Global styles */
        :root {
            --primary-color: #00C2B8;
            --secondary-color: #6F42C1;
            --accent-color: #F4D35E;
            --text-color-dark: #2d3748;
            --text-color-light: #e2e8f0;
            --bg-dark: #ffffff;
            --bg-light: #f7fafc;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        html,
        body {
            overflow-x: hidden;
            max-width: 100%;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            background-color: #f9f9fb;
            color: #2d3748;
            overflow-x: hidden;
        }

        .product-details-section {
            padding: 0 20px 40px;
            margin: 0 auto;
            min-height: calc(100vh - 100px); /* Adjust based on header/footer height */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .product-details-card {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            padding: 40px;
            width: 100%;
        }

        .product-details-card h2 {
            font-size: 3rem;
            font-weight: 700;
            color: #222222;
            margin-bottom: 20px;
        }

        .product-details-card img {
            width: 100%;
            max-width: 300px;
            height: auto;
            margin: 0 auto 30px auto;
            border-radius: 8px;
            object-fit: cover;
        }

        .product-details-card p {
            font-size: 1.15rem;
            color: #4a5568;
            line-height: 1.8;
            margin-bottom: 25px;
            text-align: left;
        }

        .product-details-card ul {
            list-style: disc;
            margin-left: 25px;
            margin-bottom: 25px;
            text-align: left;
        }

        .product-details-card ul li {
            font-size: 1.1rem;
            color: #4a5568;
            line-height: 1.7;
            margin-bottom: 8px;
        }

        .back-button-container {
            margin-top: 40px;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 14px 28px;
            font-size: 1.1rem;
            font-weight: 600;
            color: #ffffff;
            background: linear-gradient(135deg, #4f46e5, #6d28d9);
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.4);
        }

        .back-button:hover {
            background: linear-gradient(135deg, #4338ca, #5b21b6);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(79, 70, 229, 0.6);
        }

        .video-container {
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            position: relative;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .tech-read-more {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 600;
            color: #ffffff;
            background: linear-gradient(135deg, #4f46e5, #6d28d9);
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 194, 184, 0.4);
        }

        .tech-read-more:hover {
            background: linear-gradient(135deg, #4338ca, #5b21b6);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 194, 184, 0.6);
        }

        /* New CSS for the layout */
        .features-video-wrapper {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: space-between;
            margin-top: 40px;
            width: 100%; /* Ensure it takes full width of its parent */
        }

        .features-column {
            flex: 1 1 50%;
            min-width: 300px;
        }

        .video-column {
            flex: 1 1 40%;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        @media (max-width: 768px) {
            .features-video-wrapper {
                flex-direction: column;
                align-items: center;
            }

            .features-column, .video-column {
                width: 100%;
                min-width: unset; /* Reset min-width for smaller screens */
            }
        }

        .link-wrapper {
            display: flex;
            justify-content: center;
            margin-top: 40px;
            width: 100%; /* Ensure it takes full width to center effectively */
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .product-details-section {
                padding: 40px 20px;
            }

            .product-details-card {
                padding: 30px;
            }

            .product-details-card h2 {
                font-size: 2.5rem;
            }

            .product-details-card p,
            .product-details-card ul li {
                font-size: 1rem;
            }

            .back-button {
                padding: 12px 24px;
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .product-details-section {
                padding: 30px 15px;
            }

            .product-details-card {
                padding: 25px;
            }

            .product-details-card h2 {
                font-size: 2rem;
            }

            .product-details-card p,
            .product-details-card ul li {
                font-size: 0.95rem;
            }

            .back-button {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header will load here -->
    <div id="header-placeholder"></div>

    <main>
        <section class="product-details-section">
            <div id="product-details-content" class="product-details-card">
                <!-- Product details will be dynamically loaded here -->
                <p class="text-center text-gray-600 text-xl font-semibold">Loading product details...</p>
            </div>
            <div class="back-button-container">
                <a href="products.html" class="back-button">
                    <i class="fas fa-arrow-left"></i> Back to Products
                </a>
            </div>
        </section>
    </main>

    <!-- Footer will load here -->
    <div id="footer-placeholder"></div>

    <script>
        // Product data (can be fetched from an API in a real application)
        const productsData = {
            "StayInSmart": {
                title: "StayInSmart",
                image: "images/products/sis.png",
                description: "StayInSmart is an easy-to-use, integrated Mobile App (IoT smartphone / smartwatch (Android and iOS) Solution), designed and developed for the Hotel industry. It serves as a companion for hotel guests, allowing them to control appliances in their room, lock/unlock doors, order food, and more â€“ all with the swipe of a finger!",
                features: [
                    "Android and iOS smartphone compatibility",
                    "Smartwatch interface",
                    "Third-party API Integration",
                    "Seamless control of in-room appliances",
                    "Digital key for room access",
                    "In-app food and service ordering"
                ],
                visitLink: "http://www.stayinsmart.com/",
                ytLink: "https://youtu.be/OvSBap_ms0k"
            },
            "McDataArchiver": {
                title: "McDataArchiver",
                image: "images/products/Mc.png",
                description: "McDataArchiver is an application designed to facilitate the backup of CNC/PLC/HMI machines, either manually or automatically through scheduled backups. Backups can be scheduled daily, weekly, or monthly as per user requirements and retained until a specified retention period. The primary purpose of the application is to aid swift restoration of data/programs in case they are lost or changed inadvertently.",
                features: [
                    "Centralized management of backup data for all machines",
                    "Layout mirroring of machine positions for simplified usage",
                    "Role-based access control to prevent unauthorized usage",
                    "Data comparison feature to check for changes (currently for CNC only)",
                    "Backup status monitoring through logs, with email report registration option",
                    "Supports Mitsubishi M70 / M80 / C70 CNCs, FX5U / RCPU / QCPU PLCs, GOT1000 / GOT2000 HMIs"
                ],
                ytLink: "https://youtu.be/fujxPiWDRwk"
            },
            "Kisanbandhu": {
                title: "Kisanbandhu",
                image: "images/products/KB-1.png", /* Assuming .png extension */
                description: "Kisanbandhu is a digital platform that creates a marketplace to connect farmers with distribution centers. This allows farmers to sell their agricultural produce and dairy products directly to consumers at a fair price. The application involves three key stakeholders: farmers, distribution centers, and consumers, fostering a more efficient and equitable supply chain.",
                features: [
                    "Direct connection between farmers and distribution centers",
                    "Marketplace for agricultural produce and dairy products",
                    "Ensures fair pricing for farmers",
                    "Benefits consumers with fresh produce",
                    "Streamlines the supply chain"
                ]
            }
        };

        // Helper function to convert a YouTube URL to an embed URL
        function getYouTubeEmbedUrl(url) {
            if (!url) return null;
            const regExp = /(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/))([a-zA-Z0-9_-]{11})/;
            const match = url.match(regExp);
            // Add ?rel=0 to prevent related videos from other channels
            return match && match[1] ? `https://www.youtube.com/embed/${match[1]}?rel=0` : null;
        }

        // Function to render product details
        function renderProductDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const productName = urlParams.get('product');
            const container = document.getElementById('product-details-content');

            if (container) {
                if (productName) {
                    const decodedProductName = decodeURIComponent(productName);
                    const product = productsData[decodedProductName];

                    if (product) {
                        let featuresHtml = '';
                        if (product.features && product.features.length > 0) {
                            featuresHtml = '<h3 class="text-2xl font-semibold text-gray-800 mt-8 mb-4 text-left">Key Features:</h3><ul>';
                            product.features.forEach(feature => {
                                featuresHtml += `<li>${feature}</li>`;
                            });
                            featuresHtml += '</ul>';
                        }

                        let visitLinkContent = '';
                        if (product.visitLink) {
                            visitLinkContent = `
                                <div class="link-wrapper">
                                    <a href="${product.visitLink}" target="_blank" rel="noopener noreferrer" class="tech-read-more">
                                        Visit ${product.title} <i class="fas fa-external-link-alt ml-2"></i>
                                    </a>
                                </div>
                            `;
                        }

                        let youtubeVideoContent = '';
                        if (product.ytLink) {
                            const embedUrl = getYouTubeEmbedUrl(product.ytLink);
                            if (embedUrl) {
                                youtubeVideoContent = `
                                    <div class="video-column">
                                        <h3 class="text-2xl font-semibold text-gray-800 mb-4 text-left">Watch Video:</h3>
                                        <div class="video-container">
                                            <iframe
                                                src="${embedUrl}"
                                                frameborder="0"
                                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                                allowfullscreen
                                            ></iframe>
                                        </div>
                                    </div>
                                `;
                            }
                        }

                        container.innerHTML = `
                            <h2>${product.title}</h2>
                            <img src="${product.image}" alt="${product.title} Image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/333333?text=Image+Not+Found';" class="mx-auto">
                            <p>${product.description}</p>
                            <div class="features-video-wrapper">
                                <div class="features-column">
                                    ${featuresHtml}
                                </div>
                                ${youtubeVideoContent}
                            </div>
                            ${visitLinkContent}
                        `;
                        document.title = `${product.title} Details | Nichi-In Software Solutions`;
                    } else {
                        container.innerHTML = '<p class="text-center text-red-500 text-xl font-semibold">Product not found.</p>';
                        document.title = 'Product Not Found | Nichi-In Software Solutions';
                    }
                } else {
                    container.innerHTML = '<p class="text-center text-gray-600 text-xl font-semibold">Please select a product from the products page.</p>';
                    document.title = 'Select a Product | Nichi-In Software Solutions';
                }
            }
        }

        // Function to load header and footer
        async function loadPartial(id, file) {
            try {
                const res = await fetch(file);
                if (!res.ok) {
                    throw new Error(`HTTP error! status: ${res.status}`);
                }
                const html = await res.text();
                document.getElementById(id).innerHTML = html;
                if (id === "header-placeholder") {
                    if (typeof initMobileNavigation === 'function') {
                        initMobileNavigation();
                    }
                }
            } catch (error) {
                console.error(`Failed to load ${file}:`, error);
            }
        }

        // Load header, footer, and render product details when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            loadPartial("header-placeholder", "header.html");
            loadPartial("footer-placeholder", "footer.html");
            renderProductDetails();
        });
    </script>
    <script src="draft.js"></script>
</body>
</html>
