<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Details | Nichi-In Software Solutions</title>

    <!-- Fonts -->
    <link rel="icon" type="image/png" href="/assets/img/favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet" />

    <link rel="stylesheet" href="/assets/css/header-footer/header-footer.css" />

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* Global styles */
        :root {
            --primary-color: #00C2B8;
            --secondary-color: #6F42C1;
            --accent-color: #F4D35E;
            --text-color-dark: #2d3748;
            --text-color-light: #e2e8f0;
            --bg-dark: #ffffff;
            --bg-light: #f7fafc;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        html,
        body {
            overflow-x: hidden;
            max-width: 100%;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            background-color: #f9f9fb;
            color: #2d3748;
            overflow-x: hidden;
        }

        /* Simplified product details section */
        .product-details-section {
            padding: 40px 20px; /* Adjusted padding for a cleaner look */
            margin: 0 auto;
            min-height: calc(100vh - 100px); /* Adjust based on header/footer height */
            /* Removed text-align: left here to allow individual components to align */
        }

        /* Styling for dynamically loaded content */
        .product-details-section h2 {
            font-size: 3rem;
            font-weight: 700;
            color: #222222;
            margin-bottom: 20px;
            text-align: center; /* Keep title centered */
        }

        /* Styling for the main product image (default, larger size) */
        .product-main-image {
            width: 100%;
            max-width: 500px; /* Larger image size */
            height: auto;
            margin: 0 auto 30px auto; /* Center image and add bottom margin */
            display: block; /* Ensure image is block level for margin auto to work */
            object-fit: cover;
        }

        /* Styling for the smaller image next to features (Kisanbandhu specific) */
        .product-image-inline-features {
            width: 100%; /* Ensure it's responsive within its column */
            max-width: 300px; /* Smaller size */
            height: auto;
            object-fit: cover;
            border-radius: 8px; /* Added for better aesthetics */
            margin-bottom: 0; /* Remove default margin-bottom to avoid extra space in flex */
        }

        .product-details-section p {
            font-size: 1.15rem;
            color: #4a5568;
            line-height: 1.8;
            margin-bottom: 25px; /* Default margin for paragraphs */
        }

        .product-details-section ul {
            list-style: disc;
            margin-left: 25px;
            margin-bottom: 25px;
        }

        .product-details-section ul li {
            font-size: 1.1rem;
            color: #4a5568;
            line-height: 1.7;
            margin-bottom: 8px;
        }

        .video-container {
            width: 100%;
            padding-bottom: 56.25%; /* 16:9 Aspect Ratio */
            position: relative;
            background: #000;
            overflow: hidden;
            margin-bottom: 25px; /* Add margin below video */
        }

        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .tech-read-more {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 600;
            color: #ffffff;
            background: linear-gradient(135deg, #4f46e5, #6d28d9);
            border-radius: 8px;
            text-decoration: none;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 194, 184, 0.4);
        }

        .tech-read-more:hover {
            background: linear-gradient(135deg, #4338ca, #5b21b6);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 194, 184, 0.6);
        }

        /* New CSS for the layout - simplified */
        .features-video-wrapper {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            justify-content: space-between;
            margin-top: 40px;
            width: 100%;
        }

        .features-column {
            flex: 1 1 50%;
            min-width: 300px;
        }

        .video-column {
            flex: 1 1 40%;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        /* Wrapper for image and features, specifically for Kisanbandhu */
        /* This old class is now deprecated for Kisanbandhu and replaced by .kisanbandhu-main-content-wrapper */
        .image-features-wrapper {
            display: none; /* Hide this old wrapper for Kisanbandhu */
        }

        /* Specific styles for Kisanbandhu content layout */
.kisanbandhu-main-content-wrapper {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 30px;
  margin: 40px auto;
}

        .kisanbandhu-text-content p {
            margin-bottom: 0; /* Remove default paragraph margin within this flex item */
            text-align: left; /* Center text for mobile */
        }

@media (min-width: 768px) {
  .kisanbandhu-main-content-wrapper {
    flex-direction: row;
    justify-content: space-between;
    align-items: flex-start;
  }

.kisanbandhu-text-content {
  flex: 1;
  text-align: left;
  padding-right: 20px;
}

.kisanbandhu-image-content {
  flex-shrink: 0;
  align-self: flex-start;
}

.kisanbandhu-image-content .product-image-inline-features {
  max-width: 200px;
  height: auto;
  display: block;
}
}



        .link-wrapper {
            display: flex;
            justify-content: center;
            margin-top: 40px;
            width: 100%;
        }

        /* Hero Section Styling */
        .product-hero-section {
            padding: 40px 20px;
            text-align: center;
            color: #ffffff; /* Default text color for hero */
            background-color: #333; /* Fallback background color */
            background-size: cover;
            background-position: center;
            margin-bottom: 30px; /* Space between hero and content */
            margin-top: 80px;
        }

        .product-hero-section h1 {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 15px;
        }

        .product-hero-section p.tagline {
            font-size: 1.5rem;
            font-weight: 500;
            opacity: 0.9;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .product-details-section {
                padding: 30px 15px;
            }

            .product-details-section h2 {
                font-size: 2.5rem;
            }

            .product-details-section p,
            .product-details-section ul li {
                font-size: 1rem;
            }

            .features-video-wrapper {
                flex-direction: column;
                align-items: center;
            }

            .features-column, .video-column {
                width: 100%;
                min-width: unset;
            }

            /* Stack image and features on smaller screens for Kisanbandhu */
            .product-image-inline-features {
                margin-bottom: 20px; /* Ensure space when stacked */
            }

            .product-hero-section {
                padding: 60px 15px;
            }

            .product-hero-section h1 {
                font-size: 2.8rem;
            }

            .product-hero-section p.tagline {
                font-size: 1.3rem;
            }
        }

        @media (max-width: 480px) {
            .product-details-section {
                padding: 20px 10px;
            }

            .product-details-section h2 {
                font-size: 2rem;
            }

            .product-details-section p,
            .product-details-section ul li {
                font-size: 0.95rem;
            }

            .product-hero-section {
                padding: 40px 10px;
            }

            .product-hero-section h1 {
                font-size: 2rem;
            }

            .product-hero-section p.tagline {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header will load here -->
    <div id="header-placeholder"></div>

    <main>
        <!-- Product Hero Section Placeholder -->
        <section id="product-hero-section" class="product-hero-section"></section>

        <section class="product-details-section">
            <div id="product-details-content">
                <!-- Product details will be dynamically loaded here -->
                <p class="text-center text-gray-600 text-xl font-semibold">Loading product details...</p>
            </div>
        </section>
    </main>

    <!-- Footer will load here -->
    <div id="footer-placeholder"></div>

    <script>
        // Product data (can be fetched from an API in a real application)
        const productsData = {
            "StayInSmart": {
                title: "StayInSmart",
                image: "../assets/img/products/sis.png",
                description: "StayInSmart is an easy-to-use, integrated Mobile App (IoT smartphone / smartwatch (Android and iOS) Solution), designed and developed for Hotel industry and serves as a companion for the Hotel guests for controlling appliances in the room, lock/unlock doors, order food and more – all with the swipe of finger!",
                features: [
                    "Android and iOS smartphones",
                    "Smart watch interface",
                    "Third party API Integration"
                ],
                visitLink: "http://www.stayinsmart.com/",
                ytLink: "https://youtu.be/OvSBap_ms0k",
                // Bonus: Custom tagline and hero background
                tagline: "The Integrated Mobile App to serve as a Digital Companion for the Hotel guests and enhance their experience",
                heroStyle: "background: linear-gradient(135deg, #004aad, #240b77, #0a0e27);" // Example gradient
            },
            "McDataArchiver": {
                title: "McDataArchiver",
                image: "../assets/img/products/Mc.png",
                description: "McDataArchiver is an application designed to facilitate the backup of CNC/PLC/HMI machines, either manually or automatically through scheduled backups. Backups can be scheduled daily, weekly, or monthly as per user requirements and retained until a specified retention period. The primary purpose of the application is to aid swift restoration of data/programs in case they are lost or changed inadvertently.",
                features: [
                    "Centralized management of backup data for all machines",
                    "Layout mirroring of machine positions for simplified usage",
                    "Role-based access control to prevent unauthorized usage",
                    "Data comparison feature to check for changes (currently for CNC only)",
                    "Backup status monitoring through logs, with email report registration option",
                    "Supports Mitsubishi M70 / M80 / C70 CNCs, FX5U / RCPU / QCPU PLCs, GOT1000 / GOT2000 HMIs"
                ],
                ytLink: "https://youtu.be/fujxPiWDRwk",
                // Bonus: Custom tagline and hero background
                tagline: "Secure Your Industrial Data",
                heroStyle: "background: linear-gradient(135deg, #004aad, #240b77, #0a0e27);" // Applied to all products
            },
            "Kisanbandhu": {
                title: "Kisanbandhu",
                image: "../assets/img/products/KB-1.png", /* Assuming .png extension */
                // Modified description to be 3 lines
                description: "Kisanbandhu is a digital platform which creates a marketplace to connect farmers with distribution centres to sell their agricultural produce/ dairy products to consumers at fair price.<br><br>This application has 3 stakeholders namely farmers, distribution centres and the consumers.<br>",
                features: [
                    "Direct connection between farmers and distribution centers",
                    "Marketplace for agricultural produce and dairy products",
                    "Ensures fair pricing for farmers",
                    "Benefits consumers with fresh produce",
                    "Streamlines the supply chain"
                ],
                // Bonus: Custom tagline and hero background
                tagline: "An App friendly to Farmers", // Added a tagline
                heroStyle: "background: linear-gradient(135deg, #004aad, #240b77, #0a0e27);" // Applied to all products
            }
        };

        // Helper function to convert a YouTube URL to an embed URL
        function getYouTubeEmbedUrl(url) {
            if (!url) return null;
            const regExp = /(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/))([a-zA-Z0-9_-]{11})/;
            const match = url.match(regExp);
            // Add ?rel=0 to prevent related videos from other channels
            return match && match[1] ? `https://www.youtube.com/embed/${match[1]}?rel=0` : null;
        }

        // Function to render product details
        function renderProductDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const productName = urlParams.get('product');
            const detailsContainer = document.getElementById('product-details-content');
            const heroContainer = document.getElementById('product-hero-section');

            if (detailsContainer && heroContainer) {
                if (productName) {
                    const decodedProductName = decodeURIComponent(productName);
                    const product = productsData[decodedProductName];

                    if (product) {
                        // Render Hero Section
                        const tagline = product.tagline || `Learn more about ${product.title}`;
                        let heroStyle = '';
                        if (product.heroStyle) {
                            heroStyle = product.heroStyle;
                        } else if (product.heroBg) {
                            heroStyle = `background: ${product.heroBg};`;
                        }

                        heroContainer.innerHTML = `
                            <div style="${heroStyle}" class="w-full h-full flex flex-col justify-center items-center rounded-b-lg p-8">
                                <h1 class="text-white text-5xl md:text-6xl font-extrabold mb-4">${product.title}</h1>
                                <p class="tagline text-white text-xl md:text-2xl font-medium opacity-90">${tagline}</p>
                            </div>
                        `;
                        // Apply hero style directly to the heroContainer for consistent background application
                        heroContainer.style = heroStyle;


                        // Render Product Details Content
                        let featuresListHtml = '';
                        // Only generate features HTML if it's not Kisanbandhu OR if Kisanbandhu has more than 2 features (as per previous understanding)
                        // However, based on the latest explicit request, we will remove it for Kisanbandhu regardless of feature count.
                        if (decodedProductName !== "Kisanbandhu" && product.features && product.features.length > 0) {
                            featuresListHtml = `
                                <h3 class="text-2xl font-semibold text-gray-800 mt-8 mb-4">Key Features:</h3>
                                <ul>`;
                            product.features.forEach(feature => {
                                featuresListHtml += `<li>${feature}</li>`;
                            });
                            featuresListHtml += `</ul>`;
                        } else if (decodedProductName === "Kisanbandhu") {
                            // For Kisanbandhu, explicitly set featuresListHtml to empty string to remove the heading and list
                            featuresListHtml = '';
                        }


                        let visitLinkContent = '';
                        if (product.visitLink) {
                            visitLinkContent = `
                                <div class="link-wrapper">
                                    <a href="${product.visitLink}" target="_blank" rel="noopener noreferrer" class="tech-read-more">
                                        Visit ${product.title} <i class="fas fa-external-link-alt ml-2"></i>
                                    </a>
                                </div>
                            `;
                        }

                        let youtubeVideoContent = '';
                        if (product.ytLink) {
                            const embedUrl = getYouTubeEmbedUrl(product.ytLink);
                            if (embedUrl) {
                                youtubeVideoContent = `
                                    <div class="video-column">
                                        <div class="video-container">
                                            <iframe
                                                src="${embedUrl}"
                                                frameborder="0"
                                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                                allowfullscreen
                                            ></iframe>
                                        </div>
                                    </div>
                                `;
                            }
                        }

                        let mainImageHtml = '';
                        let featuresAndImageLayoutHtml = '';

                        // Conditional rendering for Kisanbandhu image and features layout
                        if (decodedProductName === "Kisanbandhu") {
                            mainImageHtml = ''; // No main image for Kisanbandhu as it's placed inline
                            // Construct the new flex layout for Kisanbandhu content
                            detailsContainer.innerHTML = `
                                <div class="kisanbandhu-main-content-wrapper">
                                    <div class="kisanbandhu-text-content">
                                        <p>${product.description}</p>
                                    </div>
                                    <div class="kisanbandhu-image-content">
                                        <img src="${product.image}" alt="${product.title} Image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/333333?text=Image+Not+Found';" class="product-image-inline-features">
                                    </div>
                                </div>
                                ${youtubeVideoContent}
                                ${visitLinkContent}
                            `;
                        } else {
                            // Default layout for other products
                            mainImageHtml = `<img src="${product.image}" alt="${product.title} Image" onerror="this.onerror=null;this.src='https://placehold.co/500x300/cccccc/333333?text=Image+Not+Found';" class="product-main-image">`;
                            featuresAndImageLayoutHtml = `
                                <div class="features-column">
                                    ${featuresListHtml}
                                </div>
                            `;
                            detailsContainer.innerHTML = `
                                ${mainImageHtml}
                                <p>${product.description}</p>
                                <div class="features-video-wrapper">
                                    ${featuresAndImageLayoutHtml}
                                    ${youtubeVideoContent}
                                </div>
                                ${visitLinkContent}
                            `;
                        }
                        document.title = `${product.title} Details | Nichi-In Software Solutions`;
                    } else {
                        // Product not found, clear hero and show message
                        heroContainer.innerHTML = '';
                        heroContainer.style = ''; // Clear any previous styles
                        detailsContainer.innerHTML = '<p class="text-center text-red-500 text-xl font-semibold">Product not found.</p>';
                        document.title = 'Product Not Found | Nichi-In Software Solutions';
                    }
                } else {
                    // No product selected, clear hero and show message
                    heroContainer.innerHTML = '';
                    heroContainer.style = ''; // Clear any previous styles
                    detailsContainer.innerHTML = '<p class="text-center text-gray-600 text-xl font-semibold">Please select a product from the products page.</p>';
                    document.title = 'Select a Product | Nichi-In Software Solutions';
                }
            }
        }

        // Function to load header and footer
        async function loadPartial(id, file) {
            try {
                const res = await fetch(file);
                if (!res.ok) {
                    throw new Error(`HTTP error! status: ${res.status}`);
                }
                const html = await res.text();
                document.getElementById(id).innerHTML = html;
                if (id === "header-placeholder") {
                    if (typeof initMobileNavigation === 'function') {
                        initMobileNavigation();
                    }
                }
            } catch (error) {
                console.error(`Failed to load ${file}:`, error);
            }
        }

        // Load header, footer, and render product details when the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
        loadPartial("header-placeholder", "../assets/header-footer/header.html");
        loadPartial("footer-placeholder", "../assets/header-footer/footer.html");
            renderProductDetails();
        });
    </script>
    <script src="../assets/js/draft.js"></script>
</body>
</html>