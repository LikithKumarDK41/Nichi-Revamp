<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Details | Nichi-In Software Solutions</title>

  <html-include src="/layout/script.html" lang="en"></html-include>
  <link rel="stylesheet" href="/assets/css/global.css">
</head>
<body>
    <html-include src="/layout/header.html" lang="en"></html-include>
    <div id="content">

    <main>
        <!-- Product Hero Section Placeholder -->
        <section id="product-hero-section" class="inner-hero-section"></section>

        <section class="product-details-section">
            <div id="product-details-content">
                <!-- Product details will be dynamically loaded here -->
                <p class="text-center text-gray-600 text-xl font-semibold">Loading product details...</p>
            </div>
        </section>
    </main>

    </div>

    <!-- Footer will load here -->
    <div id="footer-placeholder"></div>

    <script>
        // Product data (can be fetched from an API in a real application)
        const productsData = {
            "StayInSmart": {
                title: "StayInSmart",
                image: "../assets/img/products/sis.png",
                description: "StayInSmart is an easy-to-use, integrated Mobile App (IoT smartphone / smartwatch (Android and iOS) Solution), designed and developed for Hotel industry and serves as a companion for the Hotel guests for controlling appliances in the room, lock/unlock doors, order food and more â€“ all with the swipe of finger!",
                features: [
                    "Android and iOS smartphones",
                    "Smart watch interface",
                    "Third party API Integration"
                ],
                visitLink: "http://www.stayinsmart.com/",
                ytLink: "https://youtu.be/OvSBap_ms0k",
                // Bonus: Custom tagline and hero background
                tagline: "The Integrated Mobile App to serve as a Digital Companion for the Hotel guests and enhance their experience",
                heroStyle: "background: linear-gradient(135deg, #004aad, #240b77, #0a0e27);" // Example gradient
            },
            "McDataArchiver": {
                title: "McDataArchiver",
                image: "../assets/img/products/Mc.png",
                description: "McDataArchiver is an application designed to facilitate the backup of CNC/PLC/HMI machines, either manually or automatically through scheduled backups. Backups can be scheduled daily, weekly, or monthly as per user requirements and retained until a specified retention period. The primary purpose of the application is to aid swift restoration of data/programs in case they are lost or changed inadvertently.",
                features: [
                    "Centralized management of backup data for all machines",
                    "Layout mirroring of machine positions for simplified usage",
                    "Role-based access control to prevent unauthorized usage",
                    "Data comparison feature to check for changes (currently for CNC only)",
                    "Backup status monitoring through logs, with email report registration option",
                    "Supports Mitsubishi M70 / M80 / C70 CNCs, FX5U / RCPU / QCPU PLCs, GOT1000 / GOT2000 HMIs"
                ],
                ytLink: "https://youtu.be/fujxPiWDRwk",
                // Bonus: Custom tagline and hero background
                tagline: "Secure Your Industrial Data",
                heroStyle: "background: linear-gradient(135deg, #004aad, #240b77, #0a0e27);" // Applied to all products
            },
            "Kisanbandhu": {
                title: "Kisanbandhu",
                image: "../assets/img/products/KB-1.png", /* Assuming .png extension */
                // Modified description to be 3 lines
                description: "Kisanbandhu is a digital platform which creates a marketplace to connect farmers with distribution centres to sell their agricultural produce/ dairy products to consumers at fair price.<br><br>This application has 3 stakeholders namely farmers, distribution centres and the consumers.<br>",
                features: [
                    "Direct connection between farmers and distribution centers",
                    "Marketplace for agricultural produce and dairy products",
                    "Ensures fair pricing for farmers",
                    "Benefits consumers with fresh produce",
                    "Streamlines the supply chain"
                ],
                // Bonus: Custom tagline and hero background
                tagline: "An App friendly to Farmers", // Added a tagline
                heroStyle: "background: linear-gradient(135deg, #004aad, #240b77, #0a0e27);" // Applied to all products
            }
        };

        // Helper function to convert a YouTube URL to an embed URL
        function getYouTubeEmbedUrl(url) {
            if (!url) return null;
            const regExp = /(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:watch\?v=|embed\/|v\/|shorts\/))([a-zA-Z0-9_-]{11})/;
            const match = url.match(regExp);
            // Add ?rel=0 to prevent related videos from other channels
            return match && match[1] ? `https://www.youtube.com/embed/${match[1]}?rel=0` : null;
        }

        // Function to render product details
        function renderProductDetails() {
            const urlParams = new URLSearchParams(window.location.search);
            const productName = urlParams.get('product');
            const detailsContainer = document.getElementById('product-details-content');
            const heroContainer = document.getElementById('product-hero-section');

            if (detailsContainer && heroContainer) {
                if (productName) {
                    const decodedProductName = decodeURIComponent(productName);
                    const product = productsData[decodedProductName];

                    if (product) {
                        // Render Hero Section
                        const tagline = product.tagline || `Learn more about ${product.title}`;
                        let heroStyle = '';
                        if (product.heroStyle) {
                            heroStyle = product.heroStyle;
                        } else if (product.heroBg) {
                            heroStyle = `background: ${product.heroBg};`;
                        }

                        heroContainer.innerHTML = `
                                <h1 >${product.title}</h1>
                                <p >${tagline}</p>
                        `;
                        // Apply hero style directly to the heroContainer for consistent background application
                        heroContainer.style = heroStyle;


                        // Render Product Details Content
                        let featuresListHtml = '';
                        // Only generate features HTML if it's not Kisanbandhu OR if Kisanbandhu has more than 2 features (as per previous understanding)
                        // However, based on the latest explicit request, we will remove it for Kisanbandhu regardless of feature count.
                        if (decodedProductName !== "Kisanbandhu" && product.features && product.features.length > 0) {
                            featuresListHtml = `
                                <h3 class="text-2xl font-semibold text-gray-800 mt-8 mb-4">Key Features:</h3>
                                <ul>`;
                            product.features.forEach(feature => {
                                featuresListHtml += `<li>${feature}</li>`;
                            });
                            featuresListHtml += `</ul>`;
                        } else if (decodedProductName === "Kisanbandhu") {
                            // For Kisanbandhu, explicitly set featuresListHtml to empty string to remove the heading and list
                            featuresListHtml = '';
                        }


                        let visitLinkContent = '';
                        if (product.visitLink) {
                            visitLinkContent = `
                                <div class="link-wrapper">
                                    <a href="${product.visitLink}" target="_blank" rel="noopener noreferrer" class="tech-read-more">
                                        Visit ${product.title} <i class="fas fa-external-link-alt ml-2"></i>
                                    </a>
                                </div>
                            `;
                        }

                        let youtubeVideoContent = '';
                        if (product.ytLink) {
                            const embedUrl = getYouTubeEmbedUrl(product.ytLink);
                            if (embedUrl) {
                                youtubeVideoContent = `
                                    <div class="video-column">
                                        <div class="video-container">
                                            <iframe
                                                src="${embedUrl}"
                                                frameborder="0"
                                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                                allowfullscreen
                                            ></iframe>
                                        </div>
                                    </div>
                                `;
                            }
                        }

                        let mainImageHtml = '';
                        let featuresAndImageLayoutHtml = '';

                        // Conditional rendering for Kisanbandhu image and features layout
                        if (decodedProductName === "Kisanbandhu") {
                            mainImageHtml = ''; // No main image for Kisanbandhu as it's placed inline
                            // Construct the new flex layout for Kisanbandhu content
                            detailsContainer.innerHTML = `
                                <div class="kisanbandhu-main-content-wrapper">
                                    <div class="kisanbandhu-text-content">
                                        <p>${product.description}</p>
                                    </div>
                                    <div class="kisanbandhu-image-content">
                                        <img src="${product.image}" alt="${product.title} Image" onerror="this.onerror=null;this.src='https://placehold.co/300x200/cccccc/333333?text=Image+Not+Found';" class="product-image-inline-features">
                                    </div>
                                </div>
                                ${youtubeVideoContent}
                                ${visitLinkContent}
                            `;
                        } else {
                            // Default layout for other products
                            mainImageHtml = `<img src="${product.image}" alt="${product.title} Image" onerror="this.onerror=null;this.src='https://placehold.co/500x300/cccccc/333333?text=Image+Not+Found';" class="product-main-image">`;
                            featuresAndImageLayoutHtml = `
                                <div class="features-column">
                                    ${featuresListHtml}
                                </div>
                            `;
                            detailsContainer.innerHTML = `
                                ${mainImageHtml}
                                <p>${product.description}</p>
                                <div class="features-video-wrapper">
                                    ${featuresAndImageLayoutHtml}
                                    ${youtubeVideoContent}
                                </div>
                                ${visitLinkContent}
                            `;
                        }
                        document.title = `${product.title} Details | Nichi-In Software Solutions`;
                    } else {
                        // Product not found, clear hero and show message
                        heroContainer.innerHTML = '';
                        heroContainer.style = ''; // Clear any previous styles
                        detailsContainer.innerHTML = '<p class="text-center text-red-500 text-xl font-semibold">Product not found.</p>';
                        document.title = 'Product Not Found | Nichi-In Software Solutions';
                    }
                } else {
                    // No product selected, clear hero and show message
                    heroContainer.innerHTML = '';
                    heroContainer.style = ''; // Clear any previous styles
                    detailsContainer.innerHTML = '<p class="text-center text-gray-600 text-xl font-semibold">Please select a product from the products page.</p>';
                    document.title = 'Select a Product | Nichi-In Software Solutions';
                }
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderProductDetails();
        });
    </script>
    <html-include src="/layout/footer.html" lang="en"></html-include>
    <script src="/assets/js/main.js"></script>
    <script src="/backup/draft.js"></script>
    <script src="../assets/js/draft.js"></script>
</body>
</html>